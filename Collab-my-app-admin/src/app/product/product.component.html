<div class="product-container" *ngIf="!isAdding">
  <h2>Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>

  <div class="header-container">
    <button class="add-button" (click)="showAddForm()">‚ûï Th√™m s·∫£n ph·∫©m</button>
    <div class="search-bar">
      <input 
        type="text" 
        [(ngModel)]="searchText" 
        (input)="searchProducts()" 
        placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m..."
      >
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>M√£</th>
        <th>T√™n</th>
        <th>Gi√°</th>
        <th>S·ªë l∆∞·ª£ng</th>
        <th>Ph√¢n lo·∫°i</th>
        <th>Doanh s·ªë</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of paginatedProducts">
        <td>#{{ product._id }}</td>
        <td>{{ product.product_name }}</td>
        <td>{{ product.price | currency:'VND' }}</td>
        <td>{{ product.stock }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.total_sold }}</td>
        <td>
          <button (click)="editProduct(product)">‚úèÔ∏è</button>
          <button (click)="confirmDelete(product)">üóëÔ∏è</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <button (click)="prevPage()" [disabled]="currentPage === 1">‚Äπ</button>
    <span>Trang {{ currentPage }} / {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage >= totalPages">‚Ä∫</button>
  </div>
</div>

<!-- Form th√™m/s·ª≠a s·∫£n ph·∫©m -->
<app-product-add  
   *ngIf="isAdding" 
   [product]="selectedProduct" 
   (save)="addProduct($event)" 
   (close)="hideForm()">
</app-product-add>

<!-- Popup x√°c nh·∫≠n x√≥a -->
<div *ngIf="showConfirmDelete" class="popup">
  <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m "{{ selectedProduct.product_name }}" kh√¥ng?</p>
  <div class="button-group">
    <button (click)="deleteProduct()">‚úÖ X√°c nh·∫≠n</button>
    <button (click)="hideDeletePopup()">‚ùå H·ªßy</button>
  </div>
</div>