<div *ngIf="!showConfirmDelete" class="admin-container">
    <h2>Quáº£n lÃ½ TÃ i Khoáº£n</h2>

    <div class="toggle-container">
        <button [class.active]="isAdminView" (click)="toggleView()">ğŸ‘¤ Quáº£n lÃ½ Admin</button>
        <button [class.active]="!isAdminView" (click)="toggleView()">ğŸ‘¥ Quáº£n lÃ½ User</button>
    </div>

    <div class="header-container">
        <button class="add-button" *ngIf="isAdminView" (click)="goToAddAccountPage()">â• ThÃªm tÃ i khoáº£n</button>
        <div class="search-bar">
            <input type="text" [(ngModel)]="searchText" placeholder="ğŸ” TÃ¬m kiáº¿m...">
        </div>
    </div>

    <table>
        <thead>
            <tr *ngIf="isAdminView">
                <th>MÃ£ NV</th>
                <th>TÃªn ngÆ°á»i dÃ¹ng</th>
                <th>Email</th>
                <th>Láº§n Ä‘Äƒng nháº­p cuá»‘i</th>
                <th>HÃ nh Ä‘á»™ng</th>
            </tr>
            <tr *ngIf="!isAdminView">
                <th>MÃ£ KH</th>
                <th>Há» tÃªn</th>
                <th>Email</th>
                <th>Sá»‘ Ä‘iá»‡n thoáº¡i</th>
                <th>Äiá»ƒm tÃ­ch lÅ©y</th>
            </tr>
        </thead>

        <tbody>
            <!-- Báº£ng Admin -->
            <ng-container *ngIf="isAdminView">
                <tr *ngFor="let admin of getPagedAdmins()">
                    <td>{{ admin._id }}</td>
                    <td>
                        <input *ngIf="admin.isEditing" [(ngModel)]="admin.username">
                        <span *ngIf="!admin.isEditing">{{ admin.username }}</span>
                    </td>
                    <td>
                        <input *ngIf="admin.isEditing" [(ngModel)]="admin.email">
                        <span *ngIf="!admin.isEditing">{{ admin.email }}</span>
                    </td>
                    <td>{{ admin.last_login | date:'short' }}</td>
                    <td>
                        <button *ngIf="!admin.isEditing" class="edit" (click)="editAdmin(admin)">âœï¸</button>
                        <button *ngIf="admin.isEditing" class="save" (click)="saveAdmin(admin)">ğŸ’¾</button>
                        <button class="delete" (click)="showDeletePopup(admin)">ğŸ—‘ï¸</button>
                    </td>
                </tr>
            </ng-container>

            <!-- Báº£ng User -->
            <ng-container *ngIf="!isAdminView">
                <tr *ngFor="let user of getPagedUsers()">
                    <td>{{ user._id }}</td>
                    <td>{{ user.first_name }} {{ user.last_name }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.phone_number }}</td>
                    <td>{{ user.buying_points }}</td>
                </tr>
            </ng-container>
        </tbody>
    </table>

    <!-- Thanh phÃ¢n trang -->
    <div class="pagination-container">
        <button (click)="prevPage()" [disabled]="currentPage === 1">â†</button>
        <span>Trang {{ currentPage }} / {{ totalPages() }}</span>
        <button (click)="nextPage()" [disabled]="currentPage === totalPages()">â†’</button>
    </div>
</div>

<!-- Popup xÃ¡c nháº­n xÃ³a -->
<div *ngIf="showConfirmDelete" class="popup">
    <p>Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a "{{ selectedItem?.username || selectedItem?.first_name }}" khÃ´ng?</p>
    <div class="button-group">
        <button (click)="deleteItem()">âœ… XÃ¡c nháº­n</button>
        <button (click)="hideDeletePopup()">âŒ Há»§y</button>
    </div>
</div>